<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PriBrows</title>
<style>
  body { margin:0; font-family: Arial; background:#1e1e1e; color:white; }
  #top-bar { padding:10px; display:flex; justify-content:space-between; align-items:center; background:#2e2e2e;}
  #search-bar { width: 70%; padding: 8px; font-size:16px; }
  #time { font-size:16px; }
  #browser-frame { width:100%; height:75vh; border:none; margin-top:0; }
</style>
</head>
<body>

<!-- Top bar -->
<div id="top-bar">
  <input type="text" id="search-bar" placeholder="Enter URL or search query">
  <div id="time"></div>
</div>

<!-- Browser iframe -->
<iframe id="browser-frame"></iframe>

<script>
// --------- 12-hour local time ---------
function updateTime(){
    const now = new Date();
    let hours = now.getHours();
    let minutes = now.getMinutes();
    let ampm = hours >= 12 ? 'PM' : 'AM';
    hours = hours % 12;
    hours = hours ? hours : 12; // 0 => 12
    minutes = minutes < 10 ? '0'+minutes : minutes;
    document.getElementById('time').innerText = hours+':'+minutes+' '+ampm;
}
setInterval(updateTime, 1000);
updateTime();

// --------- Search / navigation ---------
const searchBar = document.getElementById('search-bar');
const iframe = document.getElementById('browser-frame');

searchBar.addEventListener('keydown', function(e){
    if(e.key === 'Enter'){
        let input = searchBar.value.trim();

        // Add http:// if user forgot it
        if(!input.startsWith('http://') && !input.startsWith('https://') && input.includes('.')){
            input = 'https://' + input;
        }

        // Try loading in iframe
        iframe.src = input;

        // Timeout to detect blocked iframe (X-Frame-Options)
        setTimeout(() => {
            const doc = iframe.contentDocument || iframe.contentWindow.document;
            if(!doc || doc.body.innerHTML === ""){
                // Blocked or empty â†’ open in new tab
                window.open(input, '_blank');
                iframe.src = ""; // clear iframe
            }
        }, 500); // half a second wait
    }
});
</script>

</body>
</html>
